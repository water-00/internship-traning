# é¡¹ç›®éœ€æ±‚è¯´æ˜ä¹¦

## ä¸€ã€é¡¹ç›®èƒŒæ™¯

### 1ã€èƒŒæ™¯

â€‹		çŸ¥è¯†å›¾è°±æ˜¯ä¸€ç§ä»¥å›¾å½¢ç»“æ„ç»„ç»‡ã€è¡¨ç¤ºå’Œå­˜å‚¨çŸ¥è¯†çš„æ–¹å¼ã€‚å®ƒä½¿ç”¨å®ä½“ã€å±æ€§å’Œå…³ç³»æ¥æè¿°ç°å®ä¸–ç•Œä¸­çš„äº‹ç‰©ï¼Œå¹¶å½¢æˆä¸€ä¸ªç»“æ„åŒ–ã€è¯­ä¹‰ä¸°å¯Œçš„çŸ¥è¯†ç½‘ç»œã€‚çŸ¥è¯†å›¾è°±åœ¨äº’è”ç½‘æœç´¢ã€æ™ºèƒ½æ¨èã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ï¼Œå¸®åŠ©äººä»¬æ›´å¥½åœ°ç†è§£çŸ¥è¯†ä¹‹é—´çš„è”ç³»å’Œä¸Šä¸‹æ–‡ï¼Œæˆä¸ºæ¨åŠ¨ä¿¡æ¯å¤„ç†å’Œäººå·¥æ™ºèƒ½å‘å±•çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ã€‚

### 2ã€ç›®çš„

â€‹		é€šè¿‡Neo4jçŸ¥è¯†å›¾è°±æŠ€æœ¯çš„è¿ç”¨ï¼Œåˆ›é€ ä¸€ä¸ªæ™ºèƒ½ã€ä¾¿æ·ä¸”çš„é—®ç­”ç³»ç»Ÿï¼Œå¸®åŠ©ç”¨æˆ·é«˜æ•ˆè·å–å¤å…¸éŸ³ä¹çš„ç›¸å…³ä¿¡æ¯ï¼Œè§£å†³æ—¥å¸¸ç”Ÿæ´»å’Œå·¥ä½œä¸­çš„é—®é¢˜ã€‚

### 3ã€æ„ä¹‰

â€‹		å¤å…¸éŸ³ä¹çŸ¥è¯†å›¾è°±é—®ç­”ç³»ç»Ÿèƒ½å¤Ÿæå¤§åœ°ä¸°å¯Œç”¨æˆ·å¯¹å¤å…¸éŸ³ä¹çš„äº†è§£ï¼Œå‘ç°ä¸åŒæ—¶æœŸå’Œé£æ ¼çš„å¤å…¸éŸ³ä¹ä½œå“ï¼Œäº†è§£ä½œæ›²å®¶çš„ç”Ÿå¹³ç­‰ã€‚

## äºŒã€åŠŸèƒ½è¯´æ˜

### 1ã€CypheræŸ¥è¯¢æ¨¡å¼

#### åŠŸèƒ½æè¿°

â€‹		åœ¨è¾“å…¥æ¡†ä¸­ç›´æ¥è¾“å…¥æ­£ç¡®æ ¼å¼çš„CypheræŸ¥è¯¢è¯­å¥ï¼Œç³»ç»Ÿæ‰§è¡Œè¯¥è¯­å¥å¹¶è¿”å›ç»“æœã€‚

#### æ¼”ç¤ºç¤ºä¾‹

â€‹		è¾“å…¥æ ¼å¼æ­£ç¡®ï¼ŒæŸ¥è¯¢æˆåŠŸï¼š

![image-20230721043015894](md_img/image-20230721043015894.png)		è¾“å…¥æ ¼å¼ä¸æ­£ç¡®ï¼Œæç¤ºï¼š

![image-20230721043041661](md_img/image-20230721043041661.png)

### 2ã€é—®ç­”æ¨¡å¼

#### åŠŸèƒ½æè¿°

â€‹		ç”¨æˆ·è¿˜å¯ä»¥åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æƒ³è¦æŸ¥è¯¢çš„é—®é¢˜ï¼Œç”±ç³»ç»Ÿè¯†åˆ«è¯¥é—®é¢˜å¹¶è½¬åŒ–æˆæŸ¥è¯¢è¯­å¥æ‰§è¡Œåå†è¾“å‡ºç»“æœã€‚

â€‹		**é—®é¢˜ç¤ºä¾‹ï¼š**

+ è´å¤šèŠ¬æœ‰å“ªäº›å¥é¸£æ›²ï¼Ÿ
+ å¯ä»¥æ¨èä¸€äº›è«æ‰ç‰¹çš„æ›²å­å—ï¼Ÿ
+ è´å¤šèŠ¬ã€åˆ©å¥¥æ³¢å¾·Â·è«æ‰ç‰¹å’Œå®‰ä¸œå°¼å¥¥Â·è¨åˆ—é‡Œè¿™ä¸‰ä¸ªäººæ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ
+ æŸ´å¯å¤«æ–¯åŸºå’Œèˆ’ä¼¯ç‰¹æ˜¯åœ¨å“ªé‡Œå‡ºç”Ÿçš„ï¼Ÿ
+ è´å¤šèŠ¬çš„è€å¸ˆæ˜¯è°ï¼Ÿ

â€‹		å¦‚æœç³»ç»ŸæŸ¥è¯¢åˆ°äº†ç›¸åº”çš„ç»“æœåˆ™è¾“å‡ºç­”æ¡ˆï¼Œå¦‚æœæ²¡æœ‰æŸ¥è¯¢åˆ°å“åº”ç»“æœæˆ–è€…è¾“å…¥çš„é—®é¢˜ä¸åˆæ³•åˆ™è¾“å‡ºç›¸åº”çš„æç¤ºã€‚

#### æ¼”ç¤ºç¤ºä¾‹

â€‹		æ­£ç¡®è¾“å‡ºå›ç­”ï¼š

![image-20230721043128089](md_img/image-20230721043128089.png)		æ²¡æœ‰æŸ¥è¯¢åˆ°å¯¹åº”ç»“æœï¼š

![image-20230721043145121](md_img/image-20230721043145121.png)

â€‹		è¾“å…¥é—®é¢˜ä¸åˆæ³•ï¼š

![image-20230721043200804](md_img/image-20230721043200804.png)

### 3ã€è¾“å‡ºç»“æœå¯è§†åŒ–

#### åŠŸèƒ½æè¿°

â€‹		é€šè¿‡D3.jsåº“å®ç°äº†ä¸€ä¸ªç®€å•çš„åŠ›å¯¼å‘å›¾å¸ƒå±€ï¼Œå°†ä»Neo4jæŸ¥è¯¢ç»“æœä¸­è·å–çš„èŠ‚ç‚¹å’Œå…³ç³»æ•°æ®åœ¨canvasç”»å¸ƒä¸Šç»˜åˆ¶æˆå¯è§†åŒ–çš„å›¾è°±ã€‚åŒæ—¶å°†å›¾è°±ä¸­ä¸åŒç±»å‹çš„èŠ‚ç‚¹æ ‡ç­¾æ˜ å°„åˆ°ä¸åŒçš„é¢œè‰²ï¼Œä»¥åŒºåˆ†ä¸åŒç±»å‹çš„èŠ‚ç‚¹ã€‚

#### æ¼”ç¤ºç¤ºä¾‹

![image-20230721043250973](md_img/image-20230721043250973.png)

## ä¸‰ã€å®ç°æ–¹å¼

### 1ã€æ•°æ®åº“è®¾è®¡

#### æ•°æ®åº“ç»“æ„

##### å®ä½“

+ **ä¹æ›²ç±»å®ä½“**ï¼šPiece(id, composer, name, opus, type)
+ **ä½œæ›²å®¶ç±»å®ä½“**ï¼šComposer(id, birth_day, birth_place, death_day, name)
+ **éä½œæ›²å®¶äººç‰©ç±»å®ä½“**ï¼šPerson(id, name)

##### å…³ç³»

+ **äººç‰©ä¹‹é—´çš„å…³ç³»**ï¼šçˆ¶äº²ã€å¥½å‹ã€è€å¸ˆã€å‡ºç‰ˆç¤¾ã€å¥³å©¿ã€åˆä¼™äººã€å¤«å¦»ã€æš—æ‹ã€è‡³äº¤ã€é›‡ä¸»
+ **äººç‰©ä¸ä½œå“çš„å…³ç³»**ï¼šåˆ›ä½œ

### 2ã€æ•°æ®è·å–

â€‹		é€šè¿‡ç½‘ç»œçˆ¬è™«è·å–äº†ç½‘ç«™https://www.classiccat.net/ä¸­çš„æ•°æ®ã€‚æ–‡ä»¶**get_music_info.py**ä¸»è¦ä½¿ç”¨äº†seleniumåº“å’Œxpathæ–¹æ³•åŠ¨æ€çˆ¬å–äº†å›¾è°±ä¸­æ¶‰åŠåˆ°çš„ä½œæ›²å®¶çš„å‰20é¦–çƒ­é—¨æ›²ç›®çš„ç›¸å…³ä¿¡æ¯å’Œä½œæ›²å®¶ä¿¡æ¯ï¼Œå¹¶ä¿å­˜åˆ°csvä¸­ã€‚

### 3ã€å‰ç«¯ç½‘é¡µçš„æ­å»º

â€‹		ç½‘é¡µå‰ç«¯ä¸»è¦åŒ…æ‹¬`index.html`å’Œ`index.js`ä¸¤ä¸ªæ–‡ä»¶ï¼Œä»¥åŠä¸€äº›èƒŒæ™¯éŸ³ä¹å’Œå›¾æ ‡ç´ æã€‚åœ¨`index.html`ä¸­ä¸»è¦æ˜¯ç”¨CSSæ¡†æ¶å®ç°é¡µé¢å¸ƒå±€ï¼Œå¹¶å¼•å…¥ç¬¬ä¸‰æ–¹Javascriptåº“D3.jsç”¨äºç»˜åˆ¶åŠ›å¯¼å‘ï¼ˆforce directedï¼‰å›¾ã€‚

â€‹		åœ¨`index.js`ä¸­å®ç°äº†æäº¤è¯·æ±‚åç”¨äºæŸ¥è¯¢çš„å…·ä½“å‡½æ•°`submitQuery()`ï¼Œå®ƒçš„é€»è¾‘å¦‚ä¸‹ï¼šå…ˆåˆ¤æ–­å½“å‰æ˜¯`cypher mode`è¿˜æ˜¯`question mode`ï¼Œå¦‚æœæ˜¯å‰è€…åˆ™ç›´æ¥è°ƒç”¨`executeCypherQuery(inputString)`ï¼Œå®ƒä¼šæ‰§è¡Œï¼šå‘neo4j serverå‘é€æŸ¥è¯¢è¯·æ±‚ã€æ ¹æ®serverçš„è¿”å›æƒ…å†µå†³å®šç»˜åˆ¶åŠ›å¯¼å‘å›¾æˆ–è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼›å¦‚æœæ˜¯åè€…åˆ™å‘`chatbot.py`å‘é€é—®é¢˜ï¼Œ`chatbot.py`ä¼šè¿”å›å›ç­”å’Œå¾—åˆ°å›ç­”çš„cypherè¯­å¥ï¼Œ`submitQuery()`æ¥ä¸‹æ¥æ ¹æ®å¾—åˆ°çš„cypheræ‰§è¡Œ`executeCypherQuery(cypherString)`ï¼Œåœ¨æ–‡æœ¬æ¡†ä¸­è¾“å‡ºæ–‡å­—ç­”æ¡ˆçš„åŒæ—¶ç»˜åˆ¶åŠ›å¯¼å‘å›¾ã€‚

â€‹		å¦å¤–`index.js`ä¸­è¿˜æœ‰ä½¿ç”¨`D3.js`åº“ç”»åŠ›å¯¼å‘å›¾çš„`updateGraph(nodes, links)`å‡½æ•°ï¼Œä½†è¿™ä¸€éƒ¨åˆ†åŸºæœ¬æŒ‰ç…§å®˜æ–¹æ–‡æ¡£å†™å³å¯ï¼Œæ•…æ­¤å¤„ä¸å†èµ˜è¿°ã€‚

### 4ã€chatbotçš„è®¾è®¡ä¸å®ç°

#### æ¦‚è¿°

â€‹		chatbot.pyæ˜¯é¡¹ç›®åç«¯çš„ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½ä¸ºå°†è¾“å…¥çš„é—®é¢˜å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹åº”çš„CypheræŸ¥è¯¢è¯­å¥å¹¶æ ¹æ®æŸ¥è¯¢ç»“æœå’Œé—®é¢˜ç±»å‹è¾“å‡ºå¯¹åº”çš„å›ç­”è¯­å¥ï¼Œè¦å®ç°chatbotçš„åŠŸèƒ½ï¼Œå¯å°†å…¶åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ä¾æ¬¡å®ç°ï¼Œåˆ†åˆ«ä¸ºï¼š

+ é—®é¢˜åˆ†ç±»æ¨¡å—ï¼šè´Ÿè´£æå–è¾“å…¥é—®é¢˜ä¸­çš„å…³é”®å­—å¹¶åˆ¤æ–­é—®é¢˜çš„ç±»å‹
+ æŸ¥è¯¢è¯­å¥ç”Ÿæˆæ¨¡å—ï¼šè´Ÿè´£æ¥æ”¶é—®é¢˜åˆ†ç±»æ¨¡å—ä¼ å…¥çš„å¯¹åº”æ•°æ®å¹¶ç”ŸæˆæŸ¥è¯¢è¯­å¥
+ å›ç­”è¯­å¥ç”Ÿæˆæ¨¡å—ï¼šè´Ÿè´£å°†ç”Ÿæˆçš„æŸ¥è¯¢è¯­å¥é€å…¥æ•°æ®åº“ä¸­æ‰§è¡Œï¼Œå¹¶æ ¹æ®è¿”å›ç»“æœå’Œé—®é¢˜ç±»å‹ç”Ÿæˆå¯¹åº”çš„å›ç­”è¯­å¥ã€‚

â€‹		ä¸‹é¢å°†ä¾æ¬¡è¯´æ˜ä¸‰ä¸ªæ¨¡å—çš„å…·ä½“å®ç°æ–¹å¼ã€‚

#### é—®é¢˜åˆ†ç±»æ¨¡å—

##### æ•°æ®å‡†å¤‡å·¥ä½œ

â€‹		åœ¨å®ç°å…·ä½“çš„åˆ†ç±»å‰ï¼Œé¦–å…ˆéœ€è¦å‡†å¤‡ä¸€äº›å¿…è¦çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¸»è¦ç”¨äºæå–é—®é¢˜å…³é”®å­—ä»¥å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ï¼Œä»¥åŠåè¯çš„ä¸­è‹±æ–‡ç¿»è¯‘å¯¹ç…§ï¼Œå…·ä½“æ¥è¯´åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š

+ å®ä½“å’Œç‰¹å¾è¯åˆ—è¡¨ï¼šé—®é¢˜ä¸­å¯èƒ½å‡ºç°çš„å®ä½“åˆ—è¡¨ï¼Œä¾‹å¦‚ä¸­è‹±æ–‡çš„äººåã€äººç‰©å…³ç³»ã€ä½œå“åç§°ã€ä½œå“ç§ç±»
+ ä¸­è‹±æ–‡å¯¹ç…§è¯å…¸ï¼šç”±äºæ•°æ®åº“ä¸­çš„å®ä½“åç§°ä½¿ç”¨è‹±æ–‡ï¼Œè€Œä¸€èˆ¬ç”¨æˆ·è¾“å…¥çš„æ˜¯ä¸­æ–‡åç§°ï¼Œå› æ­¤éœ€è¦è¯å…¸ä»¥å®ç°ä¸­è‹±æ–‡çš„è½¬åŒ–
+ é—®å¥ç–‘é—®è¯è¡¨ï¼šé—®å¥ä¸­åŒ…å«çš„ä¸€äº›è¯è¯­èƒ½å¤Ÿåæ˜ é—®é¢˜çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼šâ€œå’Œè°â€åæ˜ å‡ºè¿™ä¸€é—®é¢˜å¾ˆå¤§æ¦‚ç‡æé—®çš„æ˜¯äººç‰©å…³ç³»ã€‚é€šè¿‡æå–è¿™äº›è¯è¯­ï¼Œå¯ä»¥ä¾¿äºå®ç°é—®é¢˜çš„åˆ†ç±»ã€‚

â€‹		è¿™äº›æ•°æ®çš„æ”¶é›†ä¸€èˆ¬é€šè¿‡è¯»å–æ–‡ä»¶ä»¥åŠæ‰‹åŠ¨æ·»åŠ å®ç°ã€‚

##### ç‰¹å¾è¯æå–

â€‹		åœ¨æ”¶é›†å®Œæ‰€æœ‰çš„ç‰¹å¾è¯åï¼Œå°†æ‰€æœ‰çš„ç‰¹å¾è¯è¿›è¡Œåˆ†ç±»ï¼Œé€šè¿‡æ„é€ é¢†åŸŸactreeï¼Œæé«˜æ£€ç´¢æ•ˆç‡ã€‚é’ˆå¯¹è¾“å…¥çš„é—®é¢˜ï¼Œæå–å…¶ä¸­åŒ…å«çš„ç‰¹å¾è¯åŠå…¶å¯¹åº”çš„ç±»åˆ«ã€‚æ‰€æœ‰å‡†å¤‡å·¥ä½œå®Œæˆåï¼Œè¿›å…¥æœ€ç»ˆçš„é—®é¢˜åˆ†ç±»ã€‚

##### é—®é¢˜åˆ†ç±»

â€‹		è·Ÿæ®æå–åˆ°çš„ç‰¹å¾è¯çš„ç§ç±»ï¼Œå¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ï¼Œç»“åˆæ•°æ®åº“æœ¬èº«çš„ç»“æ„ï¼Œå¯ä»¥å°†é—®é¢˜å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š

+ ä½œå“åˆ—ä¸¾ç±»ï¼šåˆ—ä¸¾ä¸€ä¸ªæˆ–å¤šä¸ªä½œæ›²å®¶çš„å…¨éƒ¨æˆ–ç‰¹å®šç§ç±»ä½œå“
+ äººç‰©å…³ç³»ç±»ï¼šåˆ—ä¸¾ä¸€ä¸ªæˆ–å¤šä¸ªäººç‰©ä¹‹é—´çš„å…¨éƒ¨æˆ–ç‰¹å®šå…³ç³»
+ äººç‰©ä¿¡æ¯ç±»ï¼šæŸ¥è¯¢ä¸€ä¸ªæˆ–å¤šä¸ªäººç‰©çš„å…¨éƒ¨ä¿¡æ¯æˆ–éƒ¨åˆ†ä¿¡æ¯
+ æœªçŸ¥ç±»å‹ï¼šæ²¡æœ‰æå–åˆ°é—®é¢˜ä¸­çš„å…³é”®è¯æˆ–å…³é”®è¯æ²¡æœ‰åŒ¹é…åˆ°å¯¹åº”çš„ç±»å‹

â€‹		æ¯ä¸€ä¸ªå¤§ç±»åˆå¯ä»¥ç»†åˆ†æˆå…¶ä»–å­ç±»çš„é—®é¢˜ï¼Œå› æ­¤åŸºæœ¬æ¶µç›–äº†æ‰€æœ‰å¯èƒ½çš„ç”¨æˆ·éœ€æ±‚ã€‚æœ€ç»ˆé—®é¢˜åˆ†ç±»æ¨¡å—å°†é—®é¢˜ä¸­åŒ…å«çš„å®ä½“ã€å®ä½“ç±»å‹å’Œé—®é¢˜ç±»å‹å…¨éƒ¨æ‰“åŒ…å‘é€ç»™æŸ¥è¯¢è¯­å¥ç”Ÿæˆæ¨¡å—ã€‚

#### æŸ¥è¯¢è¯­å¥ç”Ÿæˆæ¨¡å—

â€‹		åœ¨æ¥æ”¶åˆ°é—®é¢˜ç±»å‹å’Œå®ä½“åˆ—è¡¨åï¼Œè¯¥æ¨¡å—é’ˆå¯¹ä¸åŒç§ç±»çš„é—®é¢˜åˆ†å¼€è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆå¯¹åº”çš„æŸ¥è¯¢è¯­å¥ã€‚å…¶ä¸­æ¶‰åŠå¤šä¸ªäººæˆ–ç§ç±»çš„æŸ¥è¯¢è¯­å¥é€šè¿‡è·å¾—å®ä½“åˆ—è¡¨ä¸­çš„äººç‰©æˆ–ç§ç±»åˆ—è¡¨ï¼Œä»¥ç‰¹å®šçš„CypheræŸ¥è¯¢æ ¼å¼è¾“å‡ºã€‚

â€‹		**ç¤ºä¾‹**ï¼šæŸ¥è¯¢è‹¥å¹²ä½œæ›²å®¶çš„è‹¥å¹²ç±»å‹æ›²ç›®

```python
c = "MATCH (m:Piece) where m.composer in {0} and m.type in {1} return m".format(composers, types)
```

â€‹		æ­¤å¤–è¿˜éœ€è¦æ³¨æ„æ³¨æ„å®ä½“ä¸ç–‘é—®è¯ä¹‹é—´çš„ä½ç½®å…³ç³»ï¼Œä¾‹å¦‚ï¼šâ€œè´å¤šèŠ¬çš„è€å¸ˆæ˜¯è°ï¼Ÿâ€å’Œâ€œè°æ˜¯è´å¤šèŠ¬çš„è€å¸ˆï¼Ÿâ€è™½ç„¶å®ä½“åˆ—è¡¨ç›¸åŒï¼Œé—®é¢˜çš„å«ä¹‰å´ä¸åŒï¼Œåœ¨ä»£ç ä¸­ä¹Ÿå¯¹è¿™ç±»é—®é¢˜è¿›è¡Œäº†ç‰¹æ®Šçš„å¤„ç†ã€‚

â€‹		æŸ¥è¯¢è¯­å¥ç”Ÿæˆåï¼Œå°†è¯­å¥ä¸é—®é¢˜ç±»å‹ä¼ å…¥æœ€ç»ˆçš„å›ç­”è¯­å¥ç”Ÿæˆæ¨¡å—ã€‚

#### å›ç­”è¯­å¥ç”Ÿæˆæ¨¡å—

â€‹		è¯¥æ¨¡å—å°†æŸ¥è¯¢è¯­å¥åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œï¼Œå¹¶æ¥æ”¶è¿”å›ç»“æœï¼Œå¯¹ç»“æœè¿›è¡Œåˆ†ç±»å’Œæå–ï¼Œæœ€ç»ˆé’ˆå¯¹ä¸åŒçš„é—®é¢˜ç±»å‹ï¼Œç”Ÿæˆä¸åŒçš„å›ç­”è¯­å¥æ ¼å¼ã€‚åœ¨å›ç­”ä¸­ï¼Œä¸ºäº†ä½“ç°chatbotçš„å‹å–„æ€§å’Œäº²å’Œæ€§ï¼ŒåŠ å…¥äº†ä¸€äº›ç”ŸåŠ¨çš„emojiè¡¨æƒ…ğŸ˜Šã€‚

â€‹		ä»¥ä¸Šæ˜¯chatbotçš„å…¨éƒ¨åŠŸèƒ½ï¼Œæ¥ä¸‹æ¥éœ€è¦å°†å®ƒå’Œå‰ç«¯ä»£ç è¿›è¡Œè¿æ¥ï¼Œä½¿å¾—å…¶ç”Ÿæˆçš„æŸ¥è¯¢è¯­å¥èƒ½å¤Ÿæ‰§è¡Œå¹¶åœ¨å‰ç«¯å›¾ä¸­æ˜¾ç¤ºï¼Œç”Ÿæˆçš„å›ç­”è¯­å¥èƒ½å¤Ÿåœ¨å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºã€‚

### 5ã€å‰åç«¯çš„è¿æ¥

ä¸»è¦æ˜¯ä½¿ç”¨`fetch`å‡½æ•°å’Œ`JSON`æ ¼å¼å®Œæˆå‰åç«¯çš„ä¼ é€’ï¼Œå¯ä»¥ç›´æ¥çœ‹ä»£ç ï¼š

```javascript
// åˆ›å»ºPOSTè¯·æ±‚
let response = fetch(neo4j_http_url, {
    method: 'POST',
    headers: {
        "Authorization": "Basic " + btoa(`${neo4jUsername}:${neo4jPassword}`),
        "Content-Type": "application/json",
        "Accept": "application/json;charset=UTF-8",
    },

    // https://neo4j.com/docs/http-api/current/actions/query-format/
    body: '{"statements":[{"statement":"' + inputString.replace(/(\r\n|\n|\r)/gm, "\\n").replace(/"/g, '\\"') + '", "resultDataContents":["graph", "row"]}]}'
})
.then(res => res.json())
.then(data => {
    // å¦‚æœcypheræŸ¥è¯¢æ²¡æœ‰æŸ¥åˆ°ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯
    if (data.errors != null && data.errors.length > 0 && inputString.length > 0) {
        alert(`Error:${data.errors[0].message}(${data.errors[0].code})`);
        return;
    }

    // å¦‚æœcypheræŸ¥è¯¢æ‰¾åˆ°äº†ï¼Œåˆ™ç»˜åˆ¶å›¾
    if (data.results != null && data.results.length > 0 && data.results[0].data != null && data.results[0].data.length > 0) {
        // çœç•¥ç»˜åˆ¶å›¾çš„å‡†å¤‡å†…å®¹...
    }

    // å°†formatted lists of nodes and linksä¸¢ç»™ç»˜åˆ¶å‡½æ•°
    updateGraph(Object.values(nodeItemMap), Object.values(linkItemMap));
});

```

æ€»çš„æ¥çœ‹ï¼Œå°±æ˜¯ç”¨`fetch`å‡½æ•°ï¼Œæ ¹æ®urlåˆ›å»ºè¯·æ±‚å¤´ï¼Œå¹¶æŠŠè¯·æ±‚å†…å®¹åŒ…è£…æˆJSONæ ¼å¼ï¼Œç„¶åè§£æè¯·æ±‚ç»“æœï¼Œæ ¹æ®ç»“æœè¿›è¡Œä¸åŒçš„åç»­å†…å®¹ã€‚
